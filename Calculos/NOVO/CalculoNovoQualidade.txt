'''

FORNECEDORES X QUALIDADE

Para saber a proporção que cada fornecedor representa no estoque total de produtos do jogador,
é feito a soma total dos produtos do fornecedor, dividindo a quantidade de produtos do fornecedor pelo total de produtos:
EX:
somaTotalProdutos = qtdProdsF1 + qtdProdsF2 + qtdProdsF3
PorcentagemF1 =  qtdProdsF1 / somaTotalProdutos
PorcentagemF2 =  qtdProdsF2 / somaTotalProdutos
PorcentagemF3 =  qtdProdsF3 / somaTotalProdutos

Com isso temos a proporção de cada fornecedor em relação ao total de produtos.
Onde essa mesma proporção será usada no total de produtos vendidos.

Preparação de proporção de vendas por fornecedor para que seja possível medir a fatia de venda de um determinado fornecedor ao vender x produtos
Ex: 
F1 tem 20% de fatia
F2 tem 30% de fatia
F3 tem 50% de fatia

Foram vendidos 3000 produtos
F1 ficou com 600 produtos
F2 ficou com 900 produtos
F3 ficou com 1500 produtos


----------------------------------------
Porém, F1 pode ter somente 100 produtos destinados a ele, 
por conta disso se faz necessário distribuir os outros 500 produtos que seriam destinados a ele para F2 e F3, 
sendo a proporção de 3 F2 para 5 de F3 (900/1500)


----------------------------------------
Retornar quantidade vendida total e de cada fornecedor, e a quantidade devolvida de cada fornecedor 

'''

import math

def calcPorcentagem(jogada):
    totalProds = sum(jogada[1])
    ret = []
    for valor in jogada[1]:
        porcentagem = valor / totalProds
        ret.append(porcentagem)
    return jogada[0], jogada[1], ret
    
    
def distribuiProdutos(jogada, produtosDestinados):
    totalProds = sum(jogada[1])
    ret = []
    for valor in jogada[2]:
        if totalProds < produtosDestinados:
            produtosDestinados = totalProds
        porcProutos = produtosDestinados * valor
        ret.append(math.floor(porcProutos))
    return jogada[0], jogada[1], jogada[2], ret
    
    
def aplicarTaxaDevolucao(jogada, taxaDevolucao):
    contTaxa = 0
    ret = []
    for valor in jogada[3]:
        valorDecrescimo = valor / taxaDevolucao[contTaxa]
        recalc = valor - valorDecrescimo
        ret.append(math.ceil(recalc))
        contTaxa = contTaxa + 1
    return jogada[0], jogada[1], jogada[2], jogada[3], ret
    

def somaDemanda(jogada):
    ret = 0
    for valor in jogada[4]:
        ret = ret + valor
    return jogada[0], jogada[1], jogada[2], jogada[3], jogada[4], ret



jogadas = [
    ('1', [100, 600, 700]), 
    ('2', [150, 500, 600]), 
    ('3', [125, 700, 500]), 
]

taxaDevolucao = [15, 25, 35]

produtosDestinados = [1000, 900, 1150]

controle = 0


jogadasAlterada = []

for jogada in jogadas:
    jogadasAlterada.append(calcPorcentagem(jogada))
# print(jogadasAlterada)


jogadasAlterada1 = []

for jogada in jogadasAlterada:
    jogadasAlterada1.append(distribuiProdutos(jogada, produtosDestinados[controle]))
    controle = controle + 1
# print(jogadasAlterada1)


jogadasAlterada2 = []

for jogada in jogadasAlterada1:
    jogadasAlterada2.append(aplicarTaxaDevolucao(jogada, taxaDevolucao))
# print(jogadasAlterada2)


jogadasFinal = []

for jogada in jogadasAlterada2:
    jogadasFinal.append(somaDemanda(jogada))


for jogada in jogadasFinal:
    print(jogada)























